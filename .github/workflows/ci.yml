# **what?**
# Run tests for dbt-codegen against supported adapters

# **why?**
# To ensure that dbt-codegen works as expected with all supported adapters

# **when?**
# On every PR, and every push to main and when manually triggered

name: Package Integration Tests

on:
    push:
        branches:
            - main
    pull_request:
    workflow_dispatch:

jobs:
  run-tests:
      uses: emmyoop/package-testing/.github/workflows/tox_tests.yml@main
      with:
        POSTGRES_SCHEMA: "dbt_codegen_integration_tests_postgres_${{ github.run_number }}"
        POSTGRES_HOST: "localhost"
        POSTGRES_USER: "root"
        POSTGRES_PORT: "5432"
        POSTGRES_DATABASE: "postgres_test"
 
